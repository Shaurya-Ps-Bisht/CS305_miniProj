<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>academicOffice.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">miniProj_onINTELLIJ</a> &gt; <a href="index.source.html" class="el_package">org.example</a> &gt; <span class="el_source">academicOffice.java</span></div><h1>academicOffice.java</h1><pre class="source lang-java linenums">package org.example;
import java.sql.*;
import java.io.*;
import java.util.*;

import com.opencsv.CSVReader;
import com.opencsv.CSVWriter;
import com.opencsv.exceptions.CsvValidationException;

<span class="nc" id="L10">public class academicOffice {</span>
//    private String studentID;
//    public student(String studentID) {
//        this.studentID = studentID;
//    }


    public static String acadLogin(Scanner scanner){
<span class="fc" id="L18">        System.out.println(&quot;Welcome Academic Office! Enter the password to login or press q to go back to select role screen: &quot;);</span>

        do {
<span class="fc" id="L21">            String password = scanner.next();</span>
<span class="fc bfc" id="L22" title="All 2 branches covered.">            if(password.equals(&quot;q&quot;)){</span>
<span class="fc" id="L23">                break;</span>
            }
<span class="fc bfc" id="L25" title="All 2 branches covered.">            else if(password.equals(&quot;root&quot;)){</span>
<span class="fc" id="L26">                return &quot;nice&quot;;</span>
            }
            else{
<span class="fc" id="L29">                System.out.println(&quot;Invalid password. Enter the password to login or press q to go back to select role screen: &quot;);</span>
            }
<span class="fc" id="L31">        }while(1==1);</span>
<span class="fc" id="L32">        return &quot;q&quot;;</span>
    }
    public static void addNewStudents(Connection connection,Scanner scanner){
<span class="fc" id="L35">        int success = 0;</span>
<span class="fc" id="L36">        System.out.println(&quot;Enter the name of the input file to register students: &quot;);</span>
<span class="fc" id="L37">        String fileName = scanner.next();</span>

<span class="fc" id="L39">        try(BufferedReader reader = new BufferedReader(new FileReader(&quot;./src/main/java/org/example/dataFiles/Student_reg_data/&quot; + fileName))){</span>
            String line;
<span class="fc" id="L41">            int i =0;</span>
<span class="fc bfc" id="L42" title="All 2 branches covered.">            while((line = reader.readLine()) != null){</span>
<span class="fc bfc" id="L43" title="All 2 branches covered.">                if(i==0){i++;continue;}</span>
<span class="fc" id="L44">                String[] values = line.split(&quot;,&quot;);</span>
<span class="fc" id="L45">                String studentId = values[0].replaceAll(&quot;\&quot;&quot;,&quot;&quot;);</span>
<span class="fc" id="L46">                String studentName = values[1].replaceAll(&quot;\&quot;&quot;,&quot;&quot;);</span>
<span class="fc" id="L47">                String contactInfo = values[2].replaceAll(&quot;\&quot;&quot;,&quot;&quot;);</span>
<span class="fc" id="L48">                String password = values[3].replaceAll(&quot;\&quot;&quot;,&quot;&quot;);</span>
<span class="fc" id="L49">                String sql = &quot;INSERT INTO students (studentid, studentname, contactno, password) VALUES (?, ?, ?, ?) on conflict (studentid) do nothing;&quot;;</span>
<span class="fc" id="L50">                try (PreparedStatement statement = connection.prepareStatement(sql)) {</span>
<span class="fc" id="L51">                    statement.setString(1, studentId);</span>
<span class="fc" id="L52">                    statement.setString(2, studentName);</span>
<span class="fc" id="L53">                    statement.setString(3, contactInfo);</span>
<span class="fc" id="L54">                    statement.setString(4, password);</span>
<span class="fc" id="L55">                    statement.executeUpdate();</span>
<span class="nc" id="L56">                } catch (SQLException e) {</span>
<span class="nc" id="L57">                    e.printStackTrace();</span>
<span class="fc" id="L58">                }</span>
<span class="fc" id="L59">            }</span>
<span class="nc" id="L60">        }catch(IOException e){</span>
<span class="nc" id="L61">            e.printStackTrace();</span>
<span class="nc" id="L62">            success=1;</span>
<span class="fc" id="L63">        }</span>
<span class="pc bpc" id="L64" title="1 of 2 branches missed.">        if(success==0){System.out.println(&quot;Succesfully added entries from &quot;+ fileName+&quot;\n&quot;);}</span>
<span class="fc" id="L65">    }</span>
    public static void addInstructors(Connection connection, Scanner scanner){
<span class="fc" id="L67">        int success = 0;</span>
<span class="fc" id="L68">        System.out.println(&quot;Enter the name of the input file to register instructors: &quot;);</span>
<span class="fc" id="L69">        String fileName = scanner.next();</span>

<span class="fc" id="L71">        try(BufferedReader reader = new BufferedReader(new FileReader(&quot;./src/main/java/org/example/dataFiles/Inst_reg_data/&quot; + fileName))){</span>
            String line;
<span class="fc" id="L73">            int i =0;</span>
<span class="fc bfc" id="L74" title="All 2 branches covered.">            while((line = reader.readLine()) != null){</span>
<span class="fc bfc" id="L75" title="All 2 branches covered.">                if(i==0){i++;continue;}</span>
<span class="fc" id="L76">                String[] values = line.split(&quot;,&quot;);</span>
<span class="fc" id="L77">                String instructorId = values[0].replaceAll(&quot;\&quot;&quot;,&quot;&quot;);</span>
<span class="fc" id="L78">                String instructorName = values[1].replaceAll(&quot;\&quot;&quot;,&quot;&quot;);</span>
<span class="fc" id="L79">                String contactInfo = values[2].replaceAll(&quot;\&quot;&quot;,&quot;&quot;);</span>
<span class="fc" id="L80">                String password = values[3].replaceAll(&quot;\&quot;&quot;,&quot;&quot;);</span>
<span class="fc" id="L81">                String sql = &quot;INSERT INTO instructors (instructorId, instructorName, contactno, password) VALUES (?, ?, ?, ?) on conflict (instructorId) do nothing;&quot;;</span>
<span class="fc" id="L82">                try (PreparedStatement statement = connection.prepareStatement(sql)) {</span>
<span class="fc" id="L83">                    statement.setString(1, instructorId);</span>
<span class="fc" id="L84">                    statement.setString(2, instructorName);</span>
<span class="fc" id="L85">                    statement.setString(3, contactInfo);</span>
<span class="fc" id="L86">                    statement.setString(4, password);</span>
<span class="fc" id="L87">                    statement.executeUpdate();</span>
<span class="nc" id="L88">                } catch (SQLException e) {</span>
<span class="nc" id="L89">                    e.printStackTrace();</span>
<span class="fc" id="L90">                }</span>
<span class="fc" id="L91">            }</span>
<span class="nc" id="L92">        }catch(IOException e){</span>
<span class="nc" id="L93">            e.printStackTrace();</span>
<span class="nc" id="L94">            success=1;</span>
<span class="fc" id="L95">        }</span>
<span class="pc bpc" id="L96" title="1 of 2 branches missed.">        if(success==0){System.out.println(&quot;Succesfully added entries from &quot;+ fileName);}</span>
<span class="fc" id="L97">    }</span>
    public static void changeCatalog(Connection connection, Scanner scanner){
<span class="fc" id="L99">        int success=0;</span>
<span class="fc" id="L100">        System.out.println(&quot;Enter the name of the input file for course catalog: &quot;);</span>
<span class="fc" id="L101">        String fileName = scanner.next();</span>

<span class="fc" id="L103">        try(BufferedReader reader = new BufferedReader(new FileReader(&quot;./src/main/java/org/example/dataFiles/courseCatalog/&quot; + fileName))){</span>
            String line;
<span class="fc" id="L105">            int i =0;</span>
<span class="fc bfc" id="L106" title="All 2 branches covered.">            while((line = reader.readLine()) != null){</span>
<span class="fc bfc" id="L107" title="All 2 branches covered.">                if(i==0){i++;continue;}</span>
<span class="fc" id="L108">                String[] values = line.split(&quot;,&quot;);</span>
<span class="fc" id="L109">                String courseid = values[0].replaceAll(&quot;\\s&quot;,&quot;&quot;);</span>
<span class="fc" id="L110">                String coursename = values[1];</span>
<span class="pc bpc" id="L111" title="2 of 4 branches missed.">                String ltpsc = (values.length &gt; 2 &amp;&amp; !values[2].isEmpty()) ? values[2] : &quot;&quot;;</span>
<span class="fc" id="L112">                ltpsc = ltpsc.replaceAll(&quot;\\s&quot;, &quot;&quot;);</span>
<span class="pc bpc" id="L113" title="2 of 4 branches missed.">                String csb = (values.length &gt; 4 &amp;&amp; !values[4].isEmpty()) ? values[4] : &quot;&quot;;</span>
<span class="pc bpc" id="L114" title="1 of 4 branches missed.">                String mcb = (values.length &gt; 5 &amp;&amp; !values[5].isEmpty()) ? values[5] : &quot;&quot;;</span>
<span class="pc bpc" id="L115" title="3 of 4 branches missed.">                String eeb = (values.length &gt; 6 &amp;&amp; !values[6].isEmpty()) ? values[6] : &quot;&quot; ;</span>
<span class="pc bpc" id="L116" title="3 of 4 branches missed.">                String chb = (values.length &gt; 7 &amp;&amp; !values[7].isEmpty()) ? values[7] : &quot;&quot;;</span>
<span class="pc bpc" id="L117" title="3 of 4 branches missed.">                String mmb = (values.length &gt; 8 &amp;&amp; !values[8].isEmpty()) ? values[8] : &quot;&quot;;</span>
<span class="pc bpc" id="L118" title="3 of 4 branches missed.">                String ceb = (values.length &gt; 9 &amp;&amp; !values[9].isEmpty()) ? values[9] : &quot;&quot;;</span>
<span class="pc bpc" id="L119" title="3 of 4 branches missed.">                String meb = (values.length &gt; 10 &amp;&amp; !values[10].isEmpty()) ? values[10] : &quot;&quot;;</span>
<span class="fc" id="L120">                String[] ltpsc_split = ltpsc.split(&quot;(?&lt;=.)(?=-[^-]*$)&quot;);</span>
<span class="fc" id="L121">                String ltps = ltpsc_split[0];</span>
<span class="fc" id="L122">                String creds = ltpsc_split[1].replaceAll(&quot;-&quot;,&quot;&quot;);</span>
<span class="fc" id="L123">                double credint = Double.parseDouble(creds);</span>

<span class="fc" id="L125">                String sql = &quot;INSERT INTO coursecatalog (courseid ,coursename , ltps , creds ,csb,mcb, eeb,chb,mmb, ceb,meb) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) &quot; + &quot;ON CONFLICT (courseid) DO UPDATE SET coursename = EXCLUDED.coursename, ltps = EXCLUDED.ltps, creds = EXCLUDED.creds, csb = EXCLUDED.csb, eeb = EXCLUDED.eeb, chb = EXCLUDED.chb, mmb = EXCLUDED.mmb, ceb = EXCLUDED.ceb, meb = EXCLUDED.meb, mcb = EXCLUDED.mcb; &quot; ;</span>

<span class="fc" id="L127">                try (PreparedStatement statement = connection.prepareStatement(sql)) {</span>
<span class="fc" id="L128">                    statement.setString(1, courseid);</span>
<span class="fc" id="L129">                    statement.setString(2, coursename);</span>
<span class="fc" id="L130">                    statement.setString(3, ltps);</span>
<span class="fc" id="L131">                    statement.setDouble(4, credint);</span>
<span class="fc" id="L132">                    statement.setString(5, csb);</span>
<span class="fc" id="L133">                    statement.setString(6, mcb);</span>
<span class="fc" id="L134">                    statement.setString(7, eeb);</span>
<span class="fc" id="L135">                    statement.setString(8, chb);</span>
<span class="fc" id="L136">                    statement.setString(9, mmb);</span>
<span class="fc" id="L137">                    statement.setString(10, ceb);</span>
<span class="fc" id="L138">                    statement.setString(11, meb);</span>
<span class="fc" id="L139">                    statement.executeUpdate();</span>
<span class="nc" id="L140">                } catch (SQLException e) {</span>
<span class="nc" id="L141">                    e.printStackTrace();</span>
<span class="fc" id="L142">                }</span>
<span class="fc" id="L143">            }</span>
<span class="nc" id="L144">        }catch(IOException e){</span>
<span class="nc" id="L145">            e.printStackTrace();</span>
<span class="nc" id="L146">            success=1;</span>
<span class="fc" id="L147">        }</span>

<span class="pc bpc" id="L149" title="1 of 2 branches missed.">        if(success==0){System.out.println(&quot;Succesfully Updated catalog with &quot;+ fileName+&quot;\n&quot;);}</span>

<span class="fc" id="L151">    }</span>

    public static void fill_both(Connection connection, Scanner scanner) throws CsvValidationException, IOException, SQLException {
<span class="fc" id="L154">        System.out.println(&quot;Enter the name of the input file for curriculum info or q to leave: &quot;);</span>
<span class="fc" id="L155">        String fileName = scanner.next();</span>
<span class="pc bpc" id="L156" title="1 of 2 branches missed.">        if(fileName.equals(&quot;q&quot;)){return;}</span>
        double PC;

<span class="fc" id="L159">        CSVReader reader = new CSVReader(new FileReader(&quot;./src/main/java/org/example/dataFiles/currInfo/&quot;+ fileName));</span>
        String[] nextLine;
<span class="fc" id="L161">        int i=0;</span>
<span class="fc bfc" id="L162" title="All 2 branches covered.">        while ((nextLine = reader.readNext()) != null) {</span>

<span class="fc bfc" id="L164" title="All 2 branches covered.">            if(i==0){i++; continue;}</span>
<span class="fc" id="L165">            String branch = nextLine[0];</span>
<span class="fc" id="L166">            String sem1 = nextLine[1];</span>
<span class="fc" id="L167">            String sem2 = nextLine[2];</span>
<span class="fc" id="L168">            String sem3 = nextLine[3];</span>
<span class="fc" id="L169">            String sem4 = nextLine[4];</span>
<span class="fc" id="L170">            String sem5 = nextLine[5];</span>
<span class="fc" id="L171">            String sem6 = nextLine[6];</span>
<span class="fc" id="L172">            String sem7 = nextLine[7];</span>
<span class="fc" id="L173">            String sem8 = nextLine[8];</span>
<span class="fc" id="L174">            String creditStructure = nextLine[9];</span>

<span class="fc" id="L176">            String[] creditStructureList  = creditStructure.split(&quot;-&quot;);</span>
<span class="fc" id="L177">            double total = Double.parseDouble(creditStructureList[0]);</span>
<span class="fc" id="L178">            double pcpe = Double.parseDouble(creditStructureList[1]);</span>
<span class="fc" id="L179">            double cp = Double.parseDouble(creditStructureList[2]);</span>
<span class="fc" id="L180">            int year = Period.get_period(connection).getInt(&quot;year&quot;);</span>

<span class="fc" id="L182">            System.out.println(total+&quot; &quot;+pcpe+&quot; &quot;+cp);</span>

<span class="fc" id="L184">            String coursesAllSem = (sem1+&quot;,&quot;+sem2+&quot;,&quot;+sem3+&quot;,&quot;+sem4+&quot;,&quot;+sem5+&quot;,&quot;+sem6+&quot;,&quot;+sem7+&quot;,&quot;+sem8).replaceAll(&quot;\\s&quot;,&quot;&quot;);</span>
<span class="fc" id="L185">            String[] allCourses = coursesAllSem.split(&quot;,&quot;);</span>
<span class="fc" id="L186">            PC= find_PC_Total(connection,allCourses,nextLine[0]);</span>
<span class="fc" id="L187">            System.out.println(PC);</span>

<span class="fc" id="L189">            fill_curriculuminfo(connection, year, total-pcpe, PC, pcpe-PC, cp, nextLine);</span>
<span class="fc" id="L190">            fill_autoEnroll(connection,nextLine,year);</span>


<span class="fc" id="L193">        }</span>
<span class="fc" id="L194">        reader.close();</span>


<span class="fc" id="L197">    }</span>

    public static void fill_curriculuminfo(Connection connection, int year, double gr, double pc, double pe, double cp, String[] values) throws SQLException {
<span class="fc" id="L200">        String sql = &quot;insert into curriculuminfo(year,branch,gr,pc,pe,cp) values(?,?,?,?,?,?) ON CONFLICT (year,branch) DO UPDATE SET gr = EXCLUDED.gr,pc = EXCLUDED.pc,pe= EXCLUDED.pe,cp = EXCLUDED.cp &quot;;</span>
<span class="fc" id="L201">        PreparedStatement pstmt = connection.prepareStatement(sql);</span>
<span class="fc" id="L202">        pstmt.setInt(1, (year));</span>
<span class="fc" id="L203">        pstmt.setString(2, (values[0]));</span>
<span class="fc" id="L204">        pstmt.setDouble(3, (gr));</span>
<span class="fc" id="L205">        pstmt.setDouble(4, (pc));</span>
<span class="fc" id="L206">        pstmt.setDouble(5, (pe));</span>
<span class="fc" id="L207">        pstmt.setDouble(6, (cp));</span>
<span class="fc" id="L208">        pstmt.execute();</span>
<span class="fc" id="L209">        pstmt.close();</span>
<span class="fc" id="L210">    }</span>
    public static void fill_autoEnroll(Connection connection, String[] values, int year) throws SQLException {
<span class="fc bfc" id="L212" title="All 2 branches covered.">        for(int i=1; i&lt;=8; i++){</span>
<span class="fc" id="L213">            String[] courses = values[i].replaceAll(&quot;\\s&quot;,&quot;&quot;).split(&quot;,&quot;);</span>
<span class="fc bfc" id="L214" title="All 2 branches covered.">            for(String course: courses){</span>
<span class="fc" id="L215">                String sql = &quot;INSERT INTO autoenrollment (courseid ,branchandyear , periodtoenroll) values (?,?,?) ON CONFLICT (courseid ,branchandyear , periodtoenroll) DO UPDATE SET courseid = EXCLUDED.courseid,branchandyear = EXCLUDED.branchandyear,periodtoenroll = EXCLUDED.periodtoenroll &quot;;</span>
<span class="fc" id="L216">                PreparedStatement pstmt = connection.prepareStatement(sql);</span>
<span class="fc" id="L217">                String periodToEnroll = &quot;&quot;;</span>
<span class="fc" id="L218">                String yearBranch = year+values[0];</span>
<span class="fc bfc" id="L219" title="All 2 branches covered.">                if(i%2==0){</span>
<span class="fc" id="L220">                    periodToEnroll = (year + (int)Math.ceil(i / 2.0)-1)+&quot;S&quot;;</span>
                }
                else{
<span class="fc" id="L223">                    periodToEnroll = (year + (int)Math.ceil(i / 2.0)-1)+&quot;W&quot;;</span>
                }
<span class="fc" id="L225">                pstmt.setString(1,(course));</span>
<span class="fc" id="L226">                pstmt.setString(2,(yearBranch));</span>
<span class="fc" id="L227">                pstmt.setString(3,(periodToEnroll));</span>
<span class="fc" id="L228">                pstmt.execute();</span>
<span class="fc" id="L229">                pstmt.close();</span>
            }
        }
<span class="fc" id="L232">    }</span>

    public static double find_PC_Total(Connection connection, String [] allCourses,String branch) throws SQLException {
<span class="fc" id="L235">        double total_creds=0;</span>

<span class="fc bfc" id="L237" title="All 2 branches covered.">        for(String course:allCourses){</span>
<span class="fc" id="L238">            String sql = String.format(&quot;select creds from coursecatalog where TRIM(courseid) = TRIM(?) and %s='pc'&quot;, branch);</span>
<span class="fc" id="L239">            PreparedStatement pstmt = connection.prepareStatement(sql);</span>
<span class="fc" id="L240">            pstmt.setString(1, (course));</span>
<span class="fc" id="L241">            ResultSet rs = pstmt.executeQuery();</span>
<span class="fc bfc" id="L242" title="All 2 branches covered.">            if(rs.next()){</span>
<span class="fc" id="L243">                total_creds= total_creds + rs.getDouble(&quot;creds&quot;);</span>
            }
        }
<span class="fc" id="L246">        return total_creds;</span>
    }

//    SELECT * FROM students
//    WHERE SUBSTRING(student_id, 1, 4) = '2020' AND
//    SUBSTRING(student_id, 5, 3) IN ('csb', 'ee');

    public static void generateTranscript(Connection connection, Scanner scanner, String studentID) throws IOException, SQLException {
<span class="fc" id="L254">        Map&lt;String, Double&gt; gradeToPoint = new HashMap&lt;&gt;();</span>
<span class="fc" id="L255">        gradeToPoint.put(&quot;A&quot;, 10.0);</span>
<span class="fc" id="L256">        gradeToPoint.put(&quot;A-&quot;, 9.0);</span>
<span class="fc" id="L257">        gradeToPoint.put(&quot;B&quot;, 8.0);</span>
<span class="fc" id="L258">        gradeToPoint.put(&quot;B-&quot;, 7.0);</span>
<span class="fc" id="L259">        gradeToPoint.put(&quot;C&quot;, 6.0);</span>
<span class="fc" id="L260">        gradeToPoint.put(&quot;C-&quot;, 5.0);</span>
<span class="fc" id="L261">        gradeToPoint.put(&quot;D&quot;, 4.0);</span>
<span class="fc" id="L262">        gradeToPoint.put(&quot;E&quot;, 2.0);</span>
<span class="fc" id="L263">        gradeToPoint.put(&quot;F&quot;, 0.0);</span>

<span class="fc" id="L265">        FileWriter writer = new FileWriter(&quot;./src/main/java/org/example/dataFiles/transcripts/&quot;+studentID+&quot;_transcript.txt&quot;);</span>
<span class="fc" id="L266">        PreparedStatement pstmt = connection.prepareStatement(&quot;SELECT studentname FROM students WHERE studentid = ?&quot;);</span>
<span class="fc" id="L267">        pstmt.setString(1, studentID);</span>
<span class="fc" id="L268">        ResultSet rs = pstmt.executeQuery();</span>
<span class="pc bpc" id="L269" title="1 of 2 branches missed.">        if(rs.next()){</span>
<span class="fc" id="L270">            writer.write(&quot;StudentID: &quot;+studentID+&quot;\n&quot;);</span>
<span class="fc" id="L271">            writer.write(&quot;Name: &quot;+ rs.getString(&quot;studentname&quot;)+&quot;\n&quot;);</span>
<span class="fc" id="L272">            writer.write(&quot;Phone Number: &quot;+&quot;contactno&quot;+&quot;\n&quot;);</span>
        }
<span class="fc" id="L274">        writer.write(&quot;\n&quot;);</span>

<span class="fc" id="L276">        int semsPassed =Utilities.semesterDifference(studentID.substring(0,4)+&quot;W&quot; ,Utilities.yearTermFinder(connection));</span>
<span class="fc" id="L277">        double credsEarned=0;</span>
<span class="fc" id="L278">        double cumilativePoints=0;</span>

<span class="pc bpc" id="L280" title="1 of 2 branches missed.">        if(semsPassed&gt;0){</span>
<span class="fc bfc" id="L281" title="All 2 branches covered.">            for(int i =0; i&lt;semsPassed; i++){</span>
<span class="fc" id="L282">                writer.write(&quot;Semester &quot; + (i+1)+&quot;\n&quot;);</span>


<span class="fc" id="L285">                double credsReg=0;</span>
<span class="fc" id="L286">                double pointsSecured=0;</span>

<span class="fc" id="L288">                String baseYear  = studentID.substring(0,4);</span>
<span class="fc" id="L289">                int intBaseYear = Integer.parseInt(baseYear);</span>
<span class="fc" id="L290">                int intCurrentYear = intBaseYear+ (semsPassed/2);</span>
<span class="fc" id="L291">                String currentYearTerm =&quot;&quot;;</span>

<span class="pc bpc" id="L293" title="1 of 2 branches missed.">                if(i%2==1){</span>
<span class="nc" id="L294">                    currentYearTerm = intCurrentYear+ &quot;S&quot;;</span>
                }
                else{
<span class="fc" id="L297">                    currentYearTerm = intCurrentYear+ &quot;W&quot;;</span>
                }

<span class="fc" id="L300">                PreparedStatement pstmt3 = connection.prepareStatement(&quot;select * from coursestaken where studentid=? and periodtaken=?&quot;);</span>
<span class="fc" id="L301">                pstmt3.setString(1,studentID);</span>
<span class="fc" id="L302">                pstmt3.setString(2,currentYearTerm);</span>
<span class="fc" id="L303">                ResultSet rs3 = pstmt3.executeQuery();</span>


<span class="fc bfc" id="L306" title="All 2 branches covered.">                while(rs3.next()){</span>
<span class="fc" id="L307">                    String courseID = rs3.getString(&quot;courseid&quot;);</span>
<span class="fc" id="L308">                    String grade = rs3.getString(&quot;grade&quot;);</span>
<span class="fc" id="L309">                    writer.write(&quot;Course ID: &quot;+ courseID + &quot; Grade: &quot;+ grade+&quot;\n&quot;);</span>
                    double creds;
<span class="fc" id="L311">                    PreparedStatement getCred = connection.prepareStatement(&quot;select * from coursecatalog where courseid=?&quot;);</span>
<span class="fc" id="L312">                    getCred.setString(1,courseID);</span>
<span class="fc" id="L313">                    ResultSet credRes = getCred.executeQuery();</span>
<span class="pc bpc" id="L314" title="1 of 2 branches missed.">                    if(credRes.next()){</span>
<span class="fc" id="L315">                        creds = credRes.getDouble(&quot;creds&quot;);</span>
<span class="fc" id="L316">                        credsReg = credsReg + creds;</span>
<span class="fc" id="L317">                        pointsSecured = pointsSecured + (creds*gradeToPoint.getOrDefault(grade, 0.0));</span>
<span class="fc bfc" id="L318" title="All 2 branches covered.">                        if(gradeToPoint.getOrDefault(grade, 0.0)&gt;2.0){</span>
<span class="fc" id="L319">                            credsEarned = credsEarned+ creds;</span>
<span class="fc" id="L320">                            cumilativePoints = cumilativePoints + (creds*gradeToPoint.getOrDefault(grade, 0.0));</span>
                        }
                    }
<span class="fc" id="L323">                }</span>
<span class="fc" id="L324">                writer.write(&quot; SGPA: &quot;+ pointsSecured/credsReg+&quot;\n&quot;);</span>
            }
<span class="fc" id="L326">            writer.write(&quot;\n\nCGPA: &quot;+cumilativePoints/credsEarned+&quot;\n&quot;);</span>
<span class="fc" id="L327">            writer.close();</span>
<span class="fc" id="L328">            rs.close();</span>
<span class="fc" id="L329">            pstmt.close();</span>
        }


<span class="fc" id="L333">    }</span>
    public static void viewGrades(Connection connection,Scanner scanner) throws SQLException {
<span class="fc" id="L335">        System.out.println(&quot;Enter the ID of the student whose grades you want to view:&quot;);</span>
<span class="fc" id="L336">        String studentid = scanner.next();</span>
<span class="fc" id="L337">        student.viewGrades(connection, studentid,false);</span>
<span class="fc" id="L338">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>