<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>student.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">UtilitiesTest.semDiff Coverage Results, UtilitiesTest.semDiff Coverage Results</a> &gt; <a href="index.source.html" class="el_package">org.example</a> &gt; <span class="el_source">student.java</span></div><h1>student.java</h1><pre class="source lang-java linenums">package org.example;
import de.vandermeer.asciitable.AsciiTable;
import de.vandermeer.asciitable.CWC_LongestWord;
import de.vandermeer.asciithemes.a7.A7_Grids;

import java.sql.*;
import java.io.*;
import java.util.*;
import de.vandermeer.asciitable.*;
import de.vandermeer.asciithemes.a7.*;
public class student {

    private String studentID;
<span class="nc" id="L14">    public student(String studentID) {</span>
<span class="nc" id="L15">        this.studentID = studentID;</span>
<span class="nc" id="L16">    }</span>

    public static String studentLogin(Connection connection) throws SQLException {
<span class="nc" id="L19">        Scanner scanner = new Scanner(System.in);</span>
<span class="nc" id="L20">        int studlog=-1;</span>
<span class="nc" id="L21">        System.out.println(&quot;Welcome Student! Enter your student ID or press q to go back to select role screen: &quot;);</span>
        do {
<span class="nc" id="L23">            String mail = scanner.next();</span>
<span class="nc bnc" id="L24" title="All 2 branches missed.">            if(mail.equals(&quot;q&quot;)){</span>
<span class="nc" id="L25">                break;</span>
            }
<span class="nc" id="L27">            System.out.print(&quot;Your Password: &quot;);</span>
<span class="nc" id="L28">            String password = scanner.next();</span>

<span class="nc" id="L30">            String sql = &quot;SELECT * FROM students WHERE studentid = ? AND password = ?&quot;;</span>
<span class="nc" id="L31">            PreparedStatement pstmt = connection.prepareStatement(sql);</span>
<span class="nc" id="L32">            pstmt.setString(1, mail);</span>
<span class="nc" id="L33">            pstmt.setString(2, password);</span>


<span class="nc" id="L36">            ResultSet rs = pstmt.executeQuery();</span>

<span class="nc bnc" id="L38" title="All 2 branches missed.">            if (rs.next()) {</span>
<span class="nc" id="L39">                String name = rs.getString(&quot;studentname&quot;);</span>
<span class="nc" id="L40">                String contactNumber = rs.getString(&quot;contactno&quot;);</span>
<span class="nc" id="L41">                System.out.println(&quot;Login successful! Welcome &quot; + name + &quot;!&quot;);</span>
<span class="nc" id="L42">                studlog=0;</span>
<span class="nc" id="L43">                return rs.getString(&quot;studentid&quot;);</span>

            } else {

<span class="nc" id="L47">                System.out.println(&quot;Invalid email or password! Enter your id again or enter q to go back to role screen&quot;);</span>
            }
<span class="nc" id="L49">            rs.close();</span>
<span class="nc" id="L50">            pstmt.close();</span>
<span class="nc bnc" id="L51" title="All 2 branches missed.">        }while(studlog!=0);</span>
<span class="nc" id="L52">        return &quot;q&quot;;</span>

    }

    public void viewGrades(Connection connection, Scanner scanner) throws SQLException {
<span class="nc" id="L57">        Map&lt;String, Double&gt; gradeToPoint = new HashMap&lt;&gt;();</span>
<span class="nc" id="L58">        gradeToPoint.put(&quot;A&quot;, 10.0);</span>
<span class="nc" id="L59">        gradeToPoint.put(&quot;A-&quot;, 9.0);</span>
<span class="nc" id="L60">        gradeToPoint.put(&quot;B&quot;, 8.0);</span>
<span class="nc" id="L61">        gradeToPoint.put(&quot;B-&quot;, 7.0);</span>
<span class="nc" id="L62">        gradeToPoint.put(&quot;C&quot;, 6.0);</span>
<span class="nc" id="L63">        gradeToPoint.put(&quot;C-&quot;, 5.0);</span>
<span class="nc" id="L64">        gradeToPoint.put(&quot;D&quot;, 4.0);</span>
<span class="nc" id="L65">        gradeToPoint.put(&quot;E&quot;, 2.0);</span>
<span class="nc" id="L66">        gradeToPoint.put(&quot;F&quot;, 0.0);</span>

<span class="nc" id="L68">        AsciiTable at = new AsciiTable();</span>
<span class="nc" id="L69">        at.getContext().setGrid(A7_Grids.minusBarPlusEquals());</span>

<span class="nc" id="L71">        at.addRule();</span>
<span class="nc" id="L72">        at.addRow(&quot;Course ID&quot;, &quot;Academic Session&quot;, &quot;Grade&quot;, &quot;Type&quot;);</span>
<span class="nc" id="L73">        at.addRule();</span>
<span class="nc" id="L74">        String query = &quot;SELECT * FROM coursestaken WHERE studentid = ?&quot;;</span>
<span class="nc" id="L75">        PreparedStatement pstmt = connection.prepareStatement(query);</span>
<span class="nc" id="L76">        pstmt.setString(1,studentID);</span>
<span class="nc" id="L77">        ResultSet rs = pstmt.executeQuery();</span>


<span class="nc bnc" id="L80" title="All 2 branches missed.">        while (rs.next()) {</span>
<span class="nc" id="L81">            String grade = rs.getString(&quot;grade&quot;);</span>
<span class="nc bnc" id="L82" title="All 2 branches missed.">            if (grade == null) {</span>
<span class="nc" id="L83">                grade = &quot;&quot;;  // replace null with an empty string</span>
            }

<span class="nc" id="L86">            at.addRow(rs.getString(&quot;courseid&quot;),</span>
<span class="nc" id="L87">                    rs.getString(&quot;periodtaken&quot;),</span>
                    grade,
<span class="nc" id="L89">                    rs.getString(&quot;type&quot;));</span>
<span class="nc" id="L90">            at.addRule();</span>
<span class="nc" id="L91">        }</span>

<span class="nc" id="L93">        at.setPaddingLeftRight(1);</span>
<span class="nc" id="L94">        at.getRenderer().setCWC(new CWC_LongestWord());</span>
<span class="nc" id="L95">        System.out.println(at.render());</span>
<span class="nc" id="L96">        pstmt.close();</span>


<span class="nc" id="L99">        int semsPassed =Utilities.semesterDifference(studentID.substring(0,4)+&quot;W&quot; ,Utilities.yearTermFinder(connection));</span>
<span class="nc" id="L100">        double credsEarned=0;</span>
<span class="nc" id="L101">        double cumilativePoints=0;</span>

<span class="nc bnc" id="L103" title="All 2 branches missed.">        if(semsPassed&gt;0){</span>
<span class="nc bnc" id="L104" title="All 2 branches missed.">            for(int i =0; i&lt;semsPassed; i++){</span>

<span class="nc" id="L106">                double credsReg=0;</span>
<span class="nc" id="L107">                double pointsSecured=0;</span>

<span class="nc" id="L109">                String baseYear  = studentID.substring(0,4);</span>
<span class="nc" id="L110">                int intBaseYear = Integer.parseInt(baseYear);</span>
<span class="nc" id="L111">                int intCurrentYear = intBaseYear+ (semsPassed/2);</span>
<span class="nc" id="L112">                String currentYearTerm =&quot;&quot;;</span>

<span class="nc bnc" id="L114" title="All 2 branches missed.">                if(i%2==1){</span>
<span class="nc" id="L115">                    currentYearTerm = intCurrentYear+ &quot;S&quot;;</span>
                }
                else{
<span class="nc" id="L118">                    currentYearTerm = intCurrentYear+ &quot;W&quot;;</span>
                }

<span class="nc" id="L121">                PreparedStatement pstmt3 = connection.prepareStatement(&quot;select * from coursestaken where studentid=? and periodtaken=?&quot;);</span>
<span class="nc" id="L122">                pstmt3.setString(1,studentID);</span>
<span class="nc" id="L123">                pstmt3.setString(2,currentYearTerm);</span>
<span class="nc" id="L124">                ResultSet rs3 = pstmt3.executeQuery();</span>


<span class="nc bnc" id="L127" title="All 2 branches missed.">                while(rs3.next()){</span>
<span class="nc" id="L128">                    String courseID = rs3.getString(&quot;courseid&quot;);</span>
<span class="nc" id="L129">                    String grade = rs3.getString(&quot;grade&quot;);</span>
                    double creds;
<span class="nc" id="L131">                    PreparedStatement getCred = connection.prepareStatement(&quot;select * from coursecatalog where courseid=?&quot;);</span>
<span class="nc" id="L132">                    getCred.setString(1,courseID);</span>
<span class="nc" id="L133">                    ResultSet credRes = getCred.executeQuery();</span>
<span class="nc bnc" id="L134" title="All 2 branches missed.">                    if(credRes.next()){</span>
<span class="nc" id="L135">                        creds = credRes.getDouble(&quot;creds&quot;);</span>
<span class="nc" id="L136">                        credsReg = credsReg + creds;</span>
<span class="nc" id="L137">                        pointsSecured = pointsSecured + (creds*gradeToPoint.getOrDefault(grade, 0.0));</span>
<span class="nc bnc" id="L138" title="All 2 branches missed.">                        if(gradeToPoint.getOrDefault(grade, 0.0)&gt;2.0){</span>
<span class="nc" id="L139">                            credsEarned = credsEarned+ creds;</span>
<span class="nc" id="L140">                            cumilativePoints = cumilativePoints + (creds*gradeToPoint.getOrDefault(grade, 0.0));</span>
                        }
                    }
<span class="nc" id="L143">                }</span>
<span class="nc" id="L144">                System.out.println(&quot;Semester &quot;+(i+1)+ &quot;: &quot;+ pointsSecured/credsReg);</span>
            }
<span class="nc" id="L146">            System.out.println(&quot;CGPA: &quot;+cumilativePoints/credsEarned);</span>
        }
<span class="nc" id="L148">    }</span>
    public void sgpaCalc(String studentid, int sempassed, Connection connection) throws SQLException {


<span class="nc" id="L152">    }</span>

    public void changeInfo(Connection connection, Scanner scanner) throws SQLException {
<span class="nc" id="L155">        int choice = -1;</span>

        do{
<span class="nc" id="L158">            System.out.println(&quot;Select 1. To change contact number 2. To change password. 3. To go back dashboard&quot;);</span>
<span class="nc" id="L159">            choice = scanner.nextInt();</span>
<span class="nc bnc" id="L160" title="All 2 branches missed.">            if(choice ==1) {</span>
                String newPassword;
<span class="nc" id="L162">                System.out.println(&quot;Enter the new contact number: &quot;);</span>
<span class="nc" id="L163">                newPassword = scanner.next();</span>
<span class="nc" id="L164">                System.out.println(&quot;ok&quot;);</span>
<span class="nc" id="L165">                String query = &quot;UPDATE students SET contactno = ? WHERE studentid = ?&quot;;</span>
<span class="nc" id="L166">                PreparedStatement pstmt = connection.prepareStatement(query);</span>
<span class="nc" id="L167">                pstmt.setString(1, newPassword);</span>
<span class="nc" id="L168">                pstmt.setString(2, studentID);</span>
<span class="nc" id="L169">                pstmt.executeUpdate();</span>
<span class="nc" id="L170">                pstmt.close();</span>

<span class="nc" id="L172">            }</span>
<span class="nc bnc" id="L173" title="All 2 branches missed.">            else if(choice ==2) {</span>
                String newPassword;
<span class="nc" id="L175">                System.out.println(&quot;Choose your new password: &quot;);</span>
<span class="nc" id="L176">                newPassword = scanner.next();</span>
<span class="nc" id="L177">                String query = &quot;UPDATE students SET password = ? WHERE studentid = ?&quot;;</span>
<span class="nc" id="L178">                PreparedStatement pstmt = connection.prepareStatement(query);</span>
<span class="nc" id="L179">                pstmt.setString(1, newPassword);</span>
<span class="nc" id="L180">                pstmt.setString(2, studentID);</span>
<span class="nc" id="L181">                pstmt.executeUpdate();</span>
<span class="nc" id="L182">                pstmt.close();</span>
<span class="nc" id="L183">            }</span>
<span class="nc bnc" id="L184" title="All 2 branches missed.">            else if(choice == 3){</span>
<span class="nc" id="L185">                break;</span>
            }
<span class="nc" id="L187">            else {System.out.println(&quot;Invalid Input: &quot;);}</span>
<span class="nc bnc" id="L188" title="All 2 branches missed.">        }while(choice !=3);</span>



<span class="nc" id="L192">    }</span>

    public void enrollHaha(Connection connection, Scanner scanner) throws SQLException {
<span class="nc" id="L195">        int choice = -1;</span>

        do{
<span class="nc" id="L198">            System.out.println(&quot;Select 1. To view the Offered Courses for this semester 2. To credit a course 3. To go back dashboard&quot;);</span>
<span class="nc" id="L199">            choice = scanner.nextInt();</span>
<span class="nc bnc" id="L200" title="All 2 branches missed.">            if(choice ==1) {</span>
<span class="nc" id="L201">                String query = &quot;SELECT * from coursesoffered where periodoffered = ?&quot;;</span>
<span class="nc" id="L202">                PreparedStatement pstmt = connection.prepareStatement(query);</span>
<span class="nc" id="L203">                pstmt.setString(1,Utilities.yearTermFinder(connection));</span>
<span class="nc" id="L204">                ResultSet rs = pstmt.executeQuery();</span>

<span class="nc" id="L206">                AsciiTable at = new AsciiTable();</span>
<span class="nc" id="L207">                at.getContext().setGrid(A7_Grids.minusBarPlusEquals());</span>

<span class="nc" id="L209">                at.addRule();</span>
<span class="nc" id="L210">                at.addRow(&quot;Course ID&quot;, &quot;Instructor ID&quot;, &quot;CGPA cutoff&quot;);</span>
<span class="nc" id="L211">                at.addRule();</span>

<span class="nc bnc" id="L213" title="All 2 branches missed.">                while (rs.next()) {</span>
<span class="nc" id="L214">                    at.addRow(rs.getString(&quot;courseid&quot;),</span>
<span class="nc" id="L215">                            rs.getString(&quot;instructorid&quot;),</span>
<span class="nc" id="L216">                            rs.getInt(&quot;minCGPA&quot;));</span>
<span class="nc" id="L217">                    at.addRule();</span>
                }

<span class="nc" id="L220">                at.setPaddingLeftRight(1);</span>
<span class="nc" id="L221">                at.getRenderer().setCWC(new CWC_LongestWord());</span>
<span class="nc" id="L222">                System.out.println(at.render());</span>


<span class="nc" id="L225">            }</span>
<span class="nc bnc" id="L226" title="All 2 branches missed.">            else if(choice ==2) {</span>

                String cCode;
                while(1==1){
<span class="nc" id="L230">                    System.out.println(&quot;Enter the course code or enter q to return to dashboard: &quot;);</span>
<span class="nc" id="L231">                    cCode = scanner.next();</span>
<span class="nc bnc" id="L232" title="All 2 branches missed.">                    if(cCode.equals(&quot;q&quot;)){break;}</span>

<span class="nc" id="L234">                    PreparedStatement pstmt = connection.prepareStatement(&quot;Select * from coursesoffered where courseid =? and periodOffered=?&quot;);</span>
<span class="nc" id="L235">                    pstmt.setString(1,cCode);</span>
<span class="nc" id="L236">                    pstmt.setString(2,Utilities.yearTermFinder(connection));</span>
<span class="nc" id="L237">                    ResultSet rs = pstmt.executeQuery();</span>
<span class="nc bnc" id="L238" title="All 2 branches missed.">                    if(!rs.next()){</span>
<span class="nc" id="L239">                        System.out.println(&quot;Not valid for this semester! Try again.&quot;);</span>
<span class="nc" id="L240">                        continue;</span>
                    }
                    else{
<span class="nc" id="L243">                        pstmt = connection.prepareStatement(&quot;Insert into coursesapproval (courseid,instructorid,studentid) values (?,?,?)&quot;);</span>
<span class="nc" id="L244">                        pstmt.setString(1,cCode);</span>
<span class="nc" id="L245">                        pstmt.setString(2,rs.getString(&quot;instructorid&quot;));</span>
<span class="nc" id="L246">                        pstmt.setString(3,studentID);</span>
<span class="nc" id="L247">                        pstmt.execute();</span>
<span class="nc" id="L248">                        System.out.println(&quot;Request for credit has been sent.&quot;);</span>
                    }

<span class="nc" id="L251">                    pstmt.close();</span>
<span class="nc" id="L252">                    break;</span>

                }
<span class="nc bnc" id="L255" title="All 2 branches missed.">                if(cCode.equals(&quot;q&quot;)){break;}</span>

<span class="nc" id="L257">            }</span>
<span class="nc bnc" id="L258" title="All 2 branches missed.">            else if(choice == 3){</span>
<span class="nc" id="L259">                break;</span>
            }

<span class="nc" id="L262">            else {System.out.println(&quot;Invalid Input: &quot;);}</span>
<span class="nc bnc" id="L263" title="All 2 branches missed.">        }while(choice !=3);</span>
<span class="nc" id="L264">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>