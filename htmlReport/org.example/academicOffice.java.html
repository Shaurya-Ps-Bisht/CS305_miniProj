<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>academicOffice.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">UtilitiesTest.semDiff Coverage Results, UtilitiesTest.semDiff Coverage Results</a> &gt; <a href="index.source.html" class="el_package">org.example</a> &gt; <span class="el_source">academicOffice.java</span></div><h1>academicOffice.java</h1><pre class="source lang-java linenums">package org.example;
import java.sql.*;
import java.io.*;
import java.util.*;

import com.opencsv.CSVReader;
import com.opencsv.CSVWriter;
import com.opencsv.exceptions.CsvValidationException;

<span class="nc" id="L10">public class academicOffice {</span>
//    private String studentID;
//    public student(String studentID) {
//        this.studentID = studentID;
//    }


    public static String acadLogin(){
<span class="nc" id="L18">        Scanner scanner = new Scanner(System.in);</span>
<span class="nc" id="L19">        System.out.println(&quot;Welcome Academic Office! Enter the password to login or press q to go back to select role screen: &quot;);</span>

        do {
<span class="nc" id="L22">            String password = scanner.next();</span>
<span class="nc bnc" id="L23" title="All 2 branches missed.">            if(password.equals(&quot;q&quot;)){</span>
<span class="nc" id="L24">                break;</span>
            }
<span class="nc bnc" id="L26" title="All 2 branches missed.">            else if(password.equals(&quot;root&quot;)){</span>
<span class="nc" id="L27">                return &quot;nice&quot;;</span>
            }
            else{
<span class="nc" id="L30">                System.out.println(&quot;Invalid password. Enter the password to login or press q to go back to select role screen: &quot;);</span>
            }
<span class="nc" id="L32">        }while(1==1);</span>
<span class="nc" id="L33">        return &quot;q&quot;;</span>
    }
    public static void addNewStudents(Connection connection,Scanner scanner){
<span class="nc" id="L36">        int success = 0;</span>
<span class="nc" id="L37">        System.out.println(&quot;Enter the name of the input file to register students: &quot;);</span>
<span class="nc" id="L38">        String fileName = scanner.next();</span>

<span class="nc" id="L40">        try(BufferedReader reader = new BufferedReader(new FileReader(&quot;./src/main/java/org/example/dataFiles/Student_reg_data/&quot; + fileName))){</span>
            String line;
<span class="nc" id="L42">            int i =0;</span>
<span class="nc bnc" id="L43" title="All 2 branches missed.">            while((line = reader.readLine()) != null){</span>
<span class="nc bnc" id="L44" title="All 2 branches missed.">                if(i==0){i++;continue;}</span>
<span class="nc" id="L45">                String[] values = line.split(&quot;,&quot;);</span>
<span class="nc" id="L46">                String studentId = values[0].replaceAll(&quot;\&quot;&quot;,&quot;&quot;);</span>
<span class="nc" id="L47">                String studentName = values[1].replaceAll(&quot;\&quot;&quot;,&quot;&quot;);</span>
<span class="nc" id="L48">                String contactInfo = values[2].replaceAll(&quot;\&quot;&quot;,&quot;&quot;);</span>
<span class="nc" id="L49">                String password = values[3].replaceAll(&quot;\&quot;&quot;,&quot;&quot;);</span>
<span class="nc" id="L50">                String sql = &quot;INSERT INTO students (studentid, studentname, contactno, password) VALUES (?, ?, ?, ?) on conflict (studentid) do nothing;&quot;;</span>
<span class="nc" id="L51">                try (PreparedStatement statement = connection.prepareStatement(sql)) {</span>
<span class="nc" id="L52">                    statement.setString(1, studentId);</span>
<span class="nc" id="L53">                    statement.setString(2, studentName);</span>
<span class="nc" id="L54">                    statement.setString(3, contactInfo);</span>
<span class="nc" id="L55">                    statement.setString(4, password);</span>
<span class="nc" id="L56">                    statement.executeUpdate();</span>
<span class="nc" id="L57">                } catch (SQLException e) {</span>
<span class="nc" id="L58">                    e.printStackTrace();</span>
<span class="nc" id="L59">                }</span>
<span class="nc" id="L60">            }</span>
<span class="nc" id="L61">        }catch(IOException e){</span>
<span class="nc" id="L62">            e.printStackTrace();</span>
<span class="nc" id="L63">            success=1;</span>
<span class="nc" id="L64">        }</span>
<span class="nc bnc" id="L65" title="All 2 branches missed.">        if(success==0){System.out.println(&quot;Succesfully added entries from &quot;+ fileName+&quot;\n&quot;);}</span>
<span class="nc" id="L66">    }</span>
    public static void addInstructors(Connection connection){
<span class="nc" id="L68">        Scanner scanner = new Scanner(System.in);</span>
<span class="nc" id="L69">        int success = 0;</span>
<span class="nc" id="L70">        System.out.println(&quot;Enter the name of the input file to register instructors: &quot;);</span>
<span class="nc" id="L71">        String fileName = scanner.next();</span>

<span class="nc" id="L73">        try(BufferedReader reader = new BufferedReader(new FileReader(&quot;./src/main/java/org/example/dataFiles/Inst_reg_data/&quot; + fileName))){</span>
            String line;
<span class="nc" id="L75">            int i =0;</span>
<span class="nc bnc" id="L76" title="All 2 branches missed.">            while((line = reader.readLine()) != null){</span>
<span class="nc bnc" id="L77" title="All 2 branches missed.">                if(i==0){i++;continue;}</span>
<span class="nc" id="L78">                String[] values = line.split(&quot;,&quot;);</span>
<span class="nc" id="L79">                String instructorId = values[0].replaceAll(&quot;\&quot;&quot;,&quot;&quot;);</span>
<span class="nc" id="L80">                String instructorName = values[1].replaceAll(&quot;\&quot;&quot;,&quot;&quot;);</span>
<span class="nc" id="L81">                String contactInfo = values[2].replaceAll(&quot;\&quot;&quot;,&quot;&quot;);</span>
<span class="nc" id="L82">                String password = values[3].replaceAll(&quot;\&quot;&quot;,&quot;&quot;);</span>
<span class="nc" id="L83">                String sql = &quot;INSERT INTO instructors (instructorId, instructorName, contactno, password) VALUES (?, ?, ?, ?) on conflict (instructorId) do nothing;&quot;;</span>
<span class="nc" id="L84">                try (PreparedStatement statement = connection.prepareStatement(sql)) {</span>
<span class="nc" id="L85">                    statement.setString(1, instructorId);</span>
<span class="nc" id="L86">                    statement.setString(2, instructorName);</span>
<span class="nc" id="L87">                    statement.setString(3, contactInfo);</span>
<span class="nc" id="L88">                    statement.setString(4, password);</span>
<span class="nc" id="L89">                    statement.executeUpdate();</span>
<span class="nc" id="L90">                } catch (SQLException e) {</span>
<span class="nc" id="L91">                    e.printStackTrace();</span>
<span class="nc" id="L92">                }</span>
<span class="nc" id="L93">            }</span>
<span class="nc" id="L94">        }catch(IOException e){</span>
<span class="nc" id="L95">            e.printStackTrace();</span>
<span class="nc" id="L96">            success=1;</span>
<span class="nc" id="L97">        }</span>
<span class="nc bnc" id="L98" title="All 2 branches missed.">        if(success==0){System.out.println(&quot;Succesfully added entries from &quot;+ fileName);}</span>
<span class="nc" id="L99">    }</span>
    public static void changeCatalog(Connection connection){
<span class="nc" id="L101">        Scanner scanner = new Scanner(System.in);</span>
<span class="nc" id="L102">        int success=0;</span>
<span class="nc" id="L103">        System.out.println(&quot;Enter the name of the input file for course catalog: &quot;);</span>
<span class="nc" id="L104">        String fileName = scanner.next();</span>

<span class="nc" id="L106">        try(BufferedReader reader = new BufferedReader(new FileReader(&quot;./src/main/java/org/example/dataFiles/courseCatalog/&quot; + fileName))){</span>
            String line;
<span class="nc" id="L108">            int i =0;</span>
<span class="nc bnc" id="L109" title="All 2 branches missed.">            while((line = reader.readLine()) != null){</span>
<span class="nc bnc" id="L110" title="All 2 branches missed.">                if(i==0){i++;continue;}</span>
<span class="nc" id="L111">                String[] values = line.split(&quot;,&quot;);</span>
<span class="nc" id="L112">                String courseid = values[0].replaceAll(&quot;\\s&quot;,&quot;&quot;);</span>
<span class="nc" id="L113">                String coursename = values[1];</span>
<span class="nc bnc" id="L114" title="All 4 branches missed.">                String ltpsc = (values.length &gt; 2 &amp;&amp; !values[2].isEmpty()) ? values[2] : &quot;&quot;;</span>
<span class="nc" id="L115">                ltpsc = ltpsc.replaceAll(&quot;\\s&quot;, &quot;&quot;);</span>
<span class="nc bnc" id="L116" title="All 4 branches missed.">                String csb = (values.length &gt; 4 &amp;&amp; !values[4].isEmpty()) ? values[4] : &quot;&quot;;</span>
<span class="nc bnc" id="L117" title="All 4 branches missed.">                String mcb = (values.length &gt; 5 &amp;&amp; !values[5].isEmpty()) ? values[5] : &quot;&quot;;</span>
<span class="nc bnc" id="L118" title="All 4 branches missed.">                String eeb = (values.length &gt; 6 &amp;&amp; !values[6].isEmpty()) ? values[6] : &quot;&quot; ;</span>
<span class="nc bnc" id="L119" title="All 4 branches missed.">                String chb = (values.length &gt; 7 &amp;&amp; !values[7].isEmpty()) ? values[7] : &quot;&quot;;</span>
<span class="nc bnc" id="L120" title="All 4 branches missed.">                String mmb = (values.length &gt; 8 &amp;&amp; !values[8].isEmpty()) ? values[8] : &quot;&quot;;</span>
<span class="nc bnc" id="L121" title="All 4 branches missed.">                String ceb = (values.length &gt; 9 &amp;&amp; !values[9].isEmpty()) ? values[9] : &quot;&quot;;</span>
<span class="nc bnc" id="L122" title="All 4 branches missed.">                String meb = (values.length &gt; 10 &amp;&amp; !values[10].isEmpty()) ? values[10] : &quot;&quot;;</span>
<span class="nc" id="L123">                String[] ltpsc_split = ltpsc.split(&quot;(?&lt;=.)(?=-[^-]*$)&quot;);</span>
<span class="nc" id="L124">                String ltps = ltpsc_split[0];</span>
<span class="nc" id="L125">                String creds = ltpsc_split[1].replaceAll(&quot;-&quot;,&quot;&quot;);</span>
<span class="nc" id="L126">                double credint = Double.parseDouble(creds);</span>

<span class="nc" id="L128">                String sql = &quot;INSERT INTO coursecatalog (courseid ,coursename , ltps , creds ,csb,mcb, eeb,chb,mmb, ceb,meb) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) &quot; + &quot;ON CONFLICT (courseid) DO UPDATE SET coursename = EXCLUDED.coursename, ltps = EXCLUDED.ltps, creds = EXCLUDED.creds, csb = EXCLUDED.csb, eeb = EXCLUDED.eeb, chb = EXCLUDED.chb, mmb = EXCLUDED.mmb, ceb = EXCLUDED.ceb, meb = EXCLUDED.meb, mcb = EXCLUDED.mcb; &quot; ;</span>

<span class="nc" id="L130">                try (PreparedStatement statement = connection.prepareStatement(sql)) {</span>
<span class="nc" id="L131">                    statement.setString(1, courseid);</span>
<span class="nc" id="L132">                    statement.setString(2, coursename);</span>
<span class="nc" id="L133">                    statement.setString(3, ltps);</span>
<span class="nc" id="L134">                    statement.setDouble(4, credint);</span>
<span class="nc" id="L135">                    statement.setString(5, csb);</span>
<span class="nc" id="L136">                    statement.setString(6, mcb);</span>
<span class="nc" id="L137">                    statement.setString(7, eeb);</span>
<span class="nc" id="L138">                    statement.setString(8, chb);</span>
<span class="nc" id="L139">                    statement.setString(9, mmb);</span>
<span class="nc" id="L140">                    statement.setString(10, ceb);</span>
<span class="nc" id="L141">                    statement.setString(11, meb);</span>
<span class="nc" id="L142">                    statement.executeUpdate();</span>
<span class="nc" id="L143">                } catch (SQLException e) {</span>
<span class="nc" id="L144">                    e.printStackTrace();</span>
<span class="nc" id="L145">                }</span>
<span class="nc" id="L146">            }</span>
<span class="nc" id="L147">        }catch(IOException e){</span>
<span class="nc" id="L148">            e.printStackTrace();</span>
<span class="nc" id="L149">            success=1;</span>
<span class="nc" id="L150">        }</span>

<span class="nc bnc" id="L152" title="All 2 branches missed.">        if(success==0){System.out.println(&quot;Succesfully Updated catalog with &quot;+ fileName+&quot;\n&quot;);}</span>

<span class="nc" id="L154">    }</span>

    public static void fill_both(Connection connection, Scanner scanner) throws CsvValidationException, IOException, SQLException {
<span class="nc" id="L157">        System.out.println(&quot;Enter the name of the input file for curriculum info or q to leave: &quot;);</span>
<span class="nc" id="L158">        String fileName = scanner.next();</span>
<span class="nc bnc" id="L159" title="All 2 branches missed.">        if(fileName.equals(&quot;q&quot;)){return;}</span>
        double PC;

<span class="nc" id="L162">        CSVReader reader = new CSVReader(new FileReader(&quot;./src/main/java/org/example/dataFiles/currInfo/&quot;+ fileName));</span>
        String[] nextLine;
<span class="nc" id="L164">        int i=0;</span>
<span class="nc bnc" id="L165" title="All 2 branches missed.">        while ((nextLine = reader.readNext()) != null) {</span>

<span class="nc bnc" id="L167" title="All 2 branches missed.">            if(i==0){i++; continue;}</span>
<span class="nc" id="L168">            String branch = nextLine[0];</span>
<span class="nc" id="L169">            String sem1 = nextLine[1];</span>
<span class="nc" id="L170">            String sem2 = nextLine[2];</span>
<span class="nc" id="L171">            String sem3 = nextLine[3];</span>
<span class="nc" id="L172">            String sem4 = nextLine[4];</span>
<span class="nc" id="L173">            String sem5 = nextLine[5];</span>
<span class="nc" id="L174">            String sem6 = nextLine[6];</span>
<span class="nc" id="L175">            String sem7 = nextLine[7];</span>
<span class="nc" id="L176">            String sem8 = nextLine[8];</span>
<span class="nc" id="L177">            String creditStructure = nextLine[9];</span>

<span class="nc" id="L179">            String[] creditStructureList  = creditStructure.split(&quot;-&quot;);</span>
<span class="nc" id="L180">            double total = Double.parseDouble(creditStructureList[0]);</span>
<span class="nc" id="L181">            double pcpe = Double.parseDouble(creditStructureList[1]);</span>
<span class="nc" id="L182">            double cp = Double.parseDouble(creditStructureList[2]);</span>
<span class="nc" id="L183">            int year = Period.get_period(connection).getInt(&quot;year&quot;);</span>

<span class="nc" id="L185">            System.out.println(total+&quot; &quot;+pcpe+&quot; &quot;+cp);</span>

<span class="nc" id="L187">            String coursesAllSem = (sem1+&quot;,&quot;+sem2+&quot;,&quot;+sem3+&quot;,&quot;+sem4+&quot;,&quot;+sem5+&quot;,&quot;+sem6+&quot;,&quot;+sem7+&quot;,&quot;+sem8).replaceAll(&quot;\\s&quot;,&quot;&quot;);</span>
<span class="nc" id="L188">            String[] allCourses = coursesAllSem.split(&quot;,&quot;);</span>
<span class="nc" id="L189">            PC= find_PC_Total(connection,allCourses,nextLine[0]);</span>
<span class="nc" id="L190">            System.out.println(PC);</span>

<span class="nc" id="L192">            fill_curriculuminfo(connection, year, total-pcpe, PC, pcpe-PC, cp, nextLine);</span>
<span class="nc" id="L193">            fill_autoEnroll(connection,nextLine,year);</span>


<span class="nc" id="L196">        }</span>
<span class="nc" id="L197">        reader.close();</span>


<span class="nc" id="L200">    }</span>

    public static void fill_curriculuminfo(Connection connection, int year, double gr, double pc, double pe, double cp, String[] values) throws SQLException {
<span class="nc" id="L203">        String sql = &quot;insert into curriculuminfo(year,branch,gr,pc,pe,cp) values(?,?,?,?,?,?) ON CONFLICT (year,branch) DO UPDATE SET gr = EXCLUDED.gr,pc = EXCLUDED.pc,pe= EXCLUDED.pe,cp = EXCLUDED.cp &quot;;</span>
<span class="nc" id="L204">        PreparedStatement pstmt = connection.prepareStatement(sql);</span>
<span class="nc" id="L205">        pstmt.setInt(1, (year));</span>
<span class="nc" id="L206">        pstmt.setString(2, (values[0]));</span>
<span class="nc" id="L207">        pstmt.setDouble(3, (gr));</span>
<span class="nc" id="L208">        pstmt.setDouble(4, (pc));</span>
<span class="nc" id="L209">        pstmt.setDouble(5, (pe));</span>
<span class="nc" id="L210">        pstmt.setDouble(6, (cp));</span>
<span class="nc" id="L211">        pstmt.execute();</span>
<span class="nc" id="L212">        pstmt.close();</span>
<span class="nc" id="L213">    }</span>
    public static void fill_autoEnroll(Connection connection, String[] values, int year) throws SQLException {
<span class="nc bnc" id="L215" title="All 2 branches missed.">        for(int i=1; i&lt;=8; i++){</span>
<span class="nc" id="L216">            String[] courses = values[i].replaceAll(&quot;\\s&quot;,&quot;&quot;).split(&quot;,&quot;);</span>
<span class="nc bnc" id="L217" title="All 2 branches missed.">            for(String course: courses){</span>
<span class="nc" id="L218">                String sql = &quot;INSERT INTO autoenrollment (courseid ,branchandyear , periodtoenroll) values (?,?,?) ON CONFLICT (courseid ,branchandyear , periodtoenroll) DO UPDATE SET courseid = EXCLUDED.courseid,branchandyear = EXCLUDED.branchandyear,periodtoenroll = EXCLUDED.periodtoenroll &quot;;</span>
<span class="nc" id="L219">                PreparedStatement pstmt = connection.prepareStatement(sql);</span>
<span class="nc" id="L220">                String periodToEnroll = &quot;&quot;;</span>
<span class="nc" id="L221">                String yearBranch = year+values[0];</span>
<span class="nc bnc" id="L222" title="All 2 branches missed.">                if(i%2==0){</span>
<span class="nc" id="L223">                    periodToEnroll = (year + (int)Math.ceil(i / 2.0)-1)+&quot;S&quot;;</span>
                }
                else{
<span class="nc" id="L226">                    periodToEnroll = (year + (int)Math.ceil(i / 2.0)-1)+&quot;W&quot;;</span>
                }
<span class="nc" id="L228">                pstmt.setString(1,(course));</span>
<span class="nc" id="L229">                pstmt.setString(2,(yearBranch));</span>
<span class="nc" id="L230">                pstmt.setString(3,(periodToEnroll));</span>
<span class="nc" id="L231">                pstmt.execute();</span>
<span class="nc" id="L232">                pstmt.close();</span>
            }
        }
<span class="nc" id="L235">    }</span>

    public static double find_PC_Total(Connection connection, String [] allCourses,String branch) throws SQLException {
<span class="nc" id="L238">        double total_creds=0;</span>

<span class="nc bnc" id="L240" title="All 2 branches missed.">        for(String course:allCourses){</span>
<span class="nc" id="L241">            String sql = String.format(&quot;select creds from coursecatalog where TRIM(courseid) = TRIM(?) and %s='pc'&quot;, branch);</span>
<span class="nc" id="L242">            PreparedStatement pstmt = connection.prepareStatement(sql);</span>
<span class="nc" id="L243">            pstmt.setString(1, (course));</span>
<span class="nc" id="L244">            ResultSet rs = pstmt.executeQuery();</span>
<span class="nc bnc" id="L245" title="All 2 branches missed.">            if(rs.next()){</span>
<span class="nc" id="L246">                total_creds= total_creds + rs.getDouble(&quot;creds&quot;);</span>
            }
        }
<span class="nc" id="L249">        return total_creds;</span>
    }

//    SELECT * FROM students
//    WHERE SUBSTRING(student_id, 1, 4) = '2020' AND
//    SUBSTRING(student_id, 5, 3) IN ('csb', 'ee');

    public static void generateTranscript(){

<span class="nc" id="L258">    }</span>
    public void viewGrades(Connection connection,Scanner scanner) throws SQLException {
<span class="nc" id="L260">        System.out.println(&quot;Enter the ID of the student whose grades you want to view:&quot;);</span>
<span class="nc" id="L261">        String studentid = scanner.next();</span>
<span class="nc" id="L262">        student s = new student(studentid);</span>
<span class="nc" id="L263">        s.viewGrades(connection,scanner);</span>
<span class="nc" id="L264">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>